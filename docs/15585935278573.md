# 世界坐标系（3D） 到 像素坐标系（2D）
<p align="center"><img src="https://raw.githubusercontent.com/lxy5513/Markdown_image_dateset/master/Xnip2019-01-16_15-16-39.png" width="100%" alt="" /></p>


---
# Pinhole camera model
<p align="center"><img src="https://raw.githubusercontent.com/lxy5513/Markdown_image_dateset/master/Xnip2019-01-16_14-39-36.png" width="70%" alt="" /></p>

- The origin O
相机孔位置（camera aperture）

- X1,X2 is the image panel 

- X3 (optical axis, principal axis, principal ray)
Axis X3 is pointing in the viewing direction of the camera 
- R (principal point) 
The intersection of the optical axis and the image panel 
- f (focal length) 

## 世界坐标系 到 相机坐标系 
<p align="center"><img src="https://raw.githubusercontent.com/lxy5513/Markdown_image_dateset/master/Xnip2019-01-16_15-21-55.png" width="70%" alt="" /></p>

<br>
## 相机坐标系 到 像素坐标系
相似三角形
$$\frac{Z_c}{f} = \frac{X_c}{x} = \frac{Y_c}{y} $$
compute:
$$ x = f * \frac{X_c}{Z_c} \ \ y = f * \frac{Y_c}{Z_c} $$

## 像素坐标系 到 实际照片的坐标系
<p align="center"><img src="https://raw.githubusercontent.com/lxy5513/Markdown_image_dateset/master/Xnip2019-01-16_15-30-13.png" width="70%" alt="" /></p>


- $ f $为镜头的焦距 单位为米 
- $\alpha \ \beta$ 的单位为 像素/米
- $dx \ dy$ 为传感器x轴和y轴上单位像素的尺寸大小，单位为像素/米 
- $f_x \ f_y $ 为x y方向的焦距，单位为像素 
根据 $f, dx, dy$ 得到的
- $f_{normal_x} \ f_{normal_y} $ 为 x, y方向归一化焦距
- $(c_x, c_y)$ 为主点， 图像的中心， 单位为像素。

<p align="center"><img src="https://raw.githubusercontent.com/lxy5513/Markdown_image_dateset/master/Xnip2019-01-16_15-39-18.png" width="70%" alt="" /></p>





# 3D ——— 2D

1. World 3D ($X_w, Y_w, Z_w$)

2. Camera 3D ($X_c, Y_c, Z_c$)

3. Camera pixel 2D ($x, y$) 
4. 
5. World image 2D (u, v) 

---

### 1 -> 2 world_to_camera

![](https://raw.githubusercontent.com/lxy5513/Markdown_image_dateset/master/Xnip2019-01-16_15-16-39.png)

<br>

### 2 -> 3 

$${x = f * X_c/Z_C}^{} \ \ $$    

$$  y = f * Y_c / Z_c$$


<br>
### 3 -> 4

$$ u = \frac{x}{dx} + C_x $$

$$ v = \frac{y}{dy} + C_Y $$ 

> dx dy 实现物理坐标系到像素坐标系之间的转化 单位为像素/米 


---

- $ f $为镜头的焦距 单位为米 
- $\alpha \ \beta$ 的单位为 像素/米
- $dx \ dy$ 为传感器x轴和y轴上单位像素的尺寸大小，单位为像素/米 
- $f_x \ f_y $ 为x y方向的焦距，单位为像素 
根据 $f, dx, dy$ 得到的
- $f_{normal_x} \ f_{normal_y} $ 为 x, y方向归一化焦距
- $(c_x, c_y)$ 为主点， 图像的中心， 单位为像素。




<br>

---

# 畸变模型


<p align="center"><img src="https://raw.githubusercontent.com/lxy5513/Markdown_image_dateset/master/Xnip2019-01-16_15-49-20.png" width="100%" alt="" /></p>


